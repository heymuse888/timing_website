<!DOCTYPE HTML>
<html>
	<head>
		<title>注册 - Timing</title>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
		<link rel="stylesheet" href="assets/css/main.css" />
		<link rel="stylesheet" href="assets/css/navigation.css" />
		<noscript><link rel="stylesheet" href="assets/css/noscript.css" /></noscript>
	</head>
	<style>
		/* Register page specific styles */
		.register-container {
			position: relative;
			z-index: 3;
			min-height: calc(100vh - 5rem);
			display: flex;
			align-items: center;
			justify-content: center;
			padding: 0 2rem 2rem;
		}

		.register-content {
			background-color: rgba(27, 31, 34, 0.85);
			border-radius: 12px;
			padding: 3rem 2.5rem 2rem 2.5rem;
			width: 28rem;
			max-width: 100%;
			position: relative;
		}

		.register-title {
			text-align: center;
			color: #ffffff;
			font-size: 1.8rem;
			font-weight: 300;
			margin-bottom: 1rem;
			letter-spacing: 0.1em;
		}

<<<<<<< Updated upstream
=======
		.register-subtitle {
			text-align: center;
			color: rgba(255, 255, 255, 0.7);
			font-size: 0.9rem;
			margin-bottom: 2rem;
		}

>>>>>>> Stashed changes
		.form-group {
			margin-bottom: 1.5rem;
		}

		.form-group label {
			display: block;
			margin-bottom: 0.5rem;
			font-weight: 600;
			color: #ffffff;
			font-size: 0.9rem;
			letter-spacing: 0.05em;
		}

		.form-input {
			width: 100%;
<<<<<<< Updated upstream
			padding: 0.8rem 1rem;
=======
			padding: 1rem 1.5rem;
>>>>>>> Stashed changes
			border: 1px solid rgba(255, 255, 255, 0.3);
			border-radius: 8px;
			background: rgba(255, 255, 255, 0.05);
			color: #ffffff;
<<<<<<< Updated upstream
			font-size: 0.9rem;
=======
			font-size: 1rem;
			line-height: 1.5;
			min-height: 3.5rem;
			height: 3.5rem;
>>>>>>> Stashed changes
			transition: all 0.3s ease;
			box-sizing: border-box;
		}

		.form-input:focus {
			outline: none;
			border-color: #9f6cf7;
			background: rgba(255, 255, 255, 0.1);
			box-shadow: 0 0 0 3px rgba(159, 108, 247, 0.1);
		}

		.form-input::placeholder {
			color: rgba(255, 255, 255, 0.5);
		}

<<<<<<< Updated upstream
=======
		/* DateTime input calendar icon styling */
		.form-input[type="datetime-local"] {
			color-scheme: dark;
			position: relative;
		}

		/* Calendar icon styling - ensure visibility with stronger approach */
		.form-input[type="datetime-local"]::-webkit-calendar-picker-indicator {
			background: transparent;
			cursor: pointer;
			position: relative;
			width: 20px;
			height: 20px;
			border: none;
			outline: none;
			/* Multiple approaches to ensure white color visibility */
			filter: brightness(0) invert(1) contrast(100%);
			opacity: 1;
			background-color: transparent;
			color: rgba(255, 255, 255, 0.8);
			transition: all 0.3s ease;
			/* Force the icon to be visible */
			-webkit-appearance: none;
			appearance: none;
		}

		.form-input[type="datetime-local"]::-webkit-calendar-picker-indicator:hover {
			opacity: 1;
			filter: brightness(0) invert(1) contrast(120%);
			background: rgba(255, 255, 255, 0.1);
			border-radius: 3px;
		}

		/* Alternative fallback for calendar icon */
		.form-input[type="datetime-local"] {
			background-image: url('data:image/svg+xml;utf8,<svg fill="%23ffffff" height="20" viewBox="0 0 24 24" width="20" xmlns="http://www.w3.org/2000/svg"><path d="M19 3h-1V1h-2v2H8V1H6v2H5c-1.11 0-1.99.89-1.99 2L3 19c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.11-.9-2-2-2zm0 16H5V8h14v11zM7 10h5v5H7z"/></svg>');
			background-repeat: no-repeat;
			background-position: right 1rem center;
			background-size: 20px 20px;
		}

		/* Select input specific styling */
		.form-input select,
		select.form-input {
			padding: 1rem 3rem 1rem 1.5rem;
			line-height: 1.5;
			min-height: 3.5rem;
			height: 3.5rem;
			appearance: none;
			background-image: url('data:image/svg+xml;utf8,<svg fill="%23ffffff" height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg"><path d="M7 10l5 5 5-5z"/></svg>');
			background-repeat: no-repeat;
			background-position: right 1rem center;
			background-size: 1.2rem;
			box-sizing: border-box;
			font-size: 1rem;
			color: rgba(255, 255, 255, 0.9);
		}

		/* Gender select specific styling - match datetime input format exactly */
		#gender {
			padding: 1rem 3rem 1rem 1.5rem !important;
			height: 3.5rem !important;
			min-height: 3.5rem !important;
			line-height: 1.5 !important;
			text-overflow: ellipsis;
			white-space: nowrap;
			overflow: hidden;
			vertical-align: middle;
			box-sizing: border-box;
			font-size: 1rem;
			/* Ensure the select behaves like other form inputs */
			-webkit-appearance: none;
			-moz-appearance: none;
			appearance: none;
		}

		#gender option {
			background: #2a1810;
			color: #ffffff;
			padding: 1rem 0.5rem;
			min-height: 2.5rem;
			line-height: 1.5;
		}

		/* Ensure placeholder text is fully visible */
		#gender:invalid {
			color: rgba(255, 255, 255, 0.6);
		}

		#gender:valid {
			color: rgba(255, 255, 255, 0.9);
		}

		/* Form group spacing improvements */
		.form-group {
			margin-bottom: 1.8rem;
		}

		.form-group label {
			margin-bottom: 0.8rem;
		}

>>>>>>> Stashed changes
		/* Verification code input with resend link */
		.verification-group {
			position: relative;
		}

		.verification-group .form-input {
			padding-right: 80px;
		}

		.verification-resend {
			position: absolute;
			right: 12px;
			top: 50%;
			transform: translateY(-50%);
			color: rgba(255, 255, 255, 0.8);
			font-size: 0.8rem;
			text-decoration: underline;
			text-decoration-color: rgba(255, 255, 255, 0.4);
			text-underline-offset: 2px;
			cursor: pointer;
			transition: all 0.3s ease;
			background: none;
			border: none;
			outline: none;
			padding: 0;
		}

		.verification-resend:hover {
			color: #ffffff;
			text-decoration-color: rgba(255, 255, 255, 0.6);
		}

<<<<<<< Updated upstream
=======
		.verification-resend:disabled {
			color: rgba(255, 255, 255, 0.4);
			cursor: not-allowed;
			text-decoration: none;
		}

		.verification-resend:disabled:hover {
			color: rgba(255, 255, 255, 0.4);
			text-decoration: none;
		}

		/* Verification code input validation styling */
		.form-input.success {
			border-color: #4CAF50 !important;
			box-shadow: 0 0 0 2px rgba(76, 175, 80, 0.2) !important;
		}

		.form-input.error {
			border-color: #f44336 !important;
			box-shadow: 0 0 0 2px rgba(244, 67, 54, 0.2) !important;
		}

		.form-input.success:focus {
			border-color: #4CAF50 !important;
			box-shadow: 0 0 0 2px rgba(76, 175, 80, 0.3) !important;
		}

		.form-input.error:focus {
			border-color: #f44336 !important;
			box-shadow: 0 0 0 2px rgba(244, 67, 54, 0.3) !important;
		}

>>>>>>> Stashed changes
		/* Password mismatch warning */
		.password-warning {
			color: #ff4444;
			font-size: 0.8rem;
			margin-top: 0.3rem;
			display: none;
		}

		.password-warning.show {
			display: block;
		}

		/* Multi-page form styles */
		.form-page {
			display: none;
		}

		.form-page.active {
			display: block;
		}

		/* Page indicator */
		.page-indicator {
			position: absolute;
			top: 1rem;
			right: 1.5rem;
			color: rgba(255, 255, 255, 0.6);
			font-size: 0.9rem;
			font-weight: 500;
		}

<<<<<<< Updated upstream
		/* Back button */
=======
		/* Back button - improved design */
>>>>>>> Stashed changes
		.back-btn {
			position: absolute;
			top: 1rem;
			left: 1.5rem;
<<<<<<< Updated upstream
			background: none;
			border: none;
			color: rgba(255, 255, 255, 0.8);
			font-size: 1.2rem;
			cursor: pointer;
			padding: 0.5rem;
			border-radius: 50%;
			transition: all 0.3s ease;
			display: none;
		}

		.back-btn:hover {
			background: rgba(255, 255, 255, 0.1);
			color: #ffffff;
=======
			background: rgba(255, 255, 255, 0.1);
			border: 1px solid rgba(255, 255, 255, 0.2);
			color: rgba(255, 255, 255, 0.9);
			width: 40px;
			height: 40px;
			cursor: pointer;
			border-radius: 50%;
			transition: all 0.3s ease;
			display: none;
			font-size: 1.1rem;
			font-weight: bold;
		}

		.back-btn.active {
			display: flex;
			align-items: center;
			justify-content: center;
		}

		.back-btn:hover {
			background: rgba(255, 255, 255, 0.2);
			border-color: rgba(255, 255, 255, 0.4);
			color: #ffffff;
			transform: scale(1.05);
		}

		/* Alternative: Use a proper back icon */
		.back-btn::before {
			content: "←";
			font-size: 1.2rem;
			line-height: 1;
>>>>>>> Stashed changes
		}

		.checkbox-forgot-row {
			display: flex;
			justify-content: space-between;
			align-items: center;
			margin: 1.5rem 0 2rem 0;
		}

		.checkbox-group {
			display: flex;
			align-items: center;
			gap: 0.5rem;
		}

		.checkbox-group input[type="checkbox"] {
			width: 18px;
			height: 18px;
			accent-color: #9f6cf7;
		}

		.checkbox-group label {
			margin: 0;
			font-size: 0.9rem;
			font-weight: 600;
			color: #ffffff;
			letter-spacing: 0.05em;
		}

		.forgot-password {
			text-align: right;
		}

		.forgot-password a {
			color: #ffffff;
			text-decoration: none;
			font-size: 0.85rem;
			transition: color 0.3s ease;
		}

		.forgot-password a:hover {
			color: rgba(255, 255, 255, 0.8);
			text-decoration: underline;
		}

		.form-register-btn {
			width: 100%;
			background: linear-gradient(45deg, #9f6cf7, #6f8bf7);
			color: #ffffff;
			border: none;
			padding: 1rem 2rem;
			border-radius: 8px;
			font-size: 1rem;
			font-weight: 600;
			letter-spacing: 0.1em;
			cursor: pointer;
			transition: all 0.3s ease;
			box-shadow: 0 4px 15px rgba(159, 108, 247, 0.3);
			text-align: center;
			display: flex;
			align-items: center;
			justify-content: center;
		}

		.form-register-btn:hover {
			transform: translateY(-2px);
			box-shadow: 0 8px 25px rgba(159, 108, 247, 0.4);
			background: linear-gradient(45deg, #b784ff, #84a0ff);
		}

<<<<<<< Updated upstream
=======
		.form-register-btn:disabled {
			opacity: 0.6;
			cursor: not-allowed;
			transform: none;
		}

		.form-register-btn:disabled:hover {
			transform: none;
			box-shadow: 0 4px 15px rgba(159, 108, 247, 0.3);
		}

>>>>>>> Stashed changes
		.login-link {
			text-align: center;
			margin-top: 2rem;
			padding-top: 1.5rem;
			border-top: 1px solid rgba(255, 255, 255, 0.1);
		}

		.login-link p {
			color: rgba(255, 255, 255, 0.7);
			font-size: 0.9rem;
			margin-bottom: 0.5rem;
		}

		.login-link a {
			color: #9f6cf7;
			text-decoration: none;
			font-weight: 600;
			transition: color 0.3s ease;
		}

		.login-link a:hover {
			color: #b784ff;
		}

		/* Mobile responsive */
		@media screen and (max-width: 768px) {
			.register-container {
				padding: 0 1rem 1rem;
			}

			.register-content {
				padding: 2.5rem 2rem 1.5rem 2rem;
				width: 100%;
			}

			.register-title {
				font-size: 1.5rem;
			}
		}

		@media screen and (max-width: 600px) {
			.register-container {
				min-height: calc(100vh - 4rem);
				padding: 0 1rem 1rem;
			}
		}

		@media screen and (max-width: 480px) {
			.register-container {
				padding: 0 0.5rem 0.5rem;
			}

			.register-content {
				padding: 2rem 1.5rem 1rem 1.5rem;
				border-radius: 8px;
			}
<<<<<<< Updated upstream
		}
	</style>
	<body class="is-preload">
		<!-- Top Navigation Bar (exactly same as intro page) -->
		<nav class="top-navigation">
			<div class="nav-container">
				<div class="nav-logo" onclick="goToHomePage()" style="cursor: pointer;">
					<img src="images/LOGO.png" alt="Timing Logo" />
					<span class="logo-text">Timing</span>
				</div>
				<div class="nav-menu">
					<a href="#" class="nav-item" id="nav-intro">简介</a>
					<a href="#" class="nav-item" id="nav-work">功能</a>
					<a href="#" class="nav-item" id="nav-curve">能量曲线</a>
					<a href="#" class="nav-item" id="nav-contact">联系我们</a>
				</div>
				<div class="nav-auth">
					<a href="#" class="login-btn" id="nav-login">登录</a>
					<a href="#" class="signup-btn" id="nav-signup">注册</a>
					<a href="#" class="lang-btn" id="nav-lang">ENG</a>
				</div>
			</div>
		</nav>
=======

			/* Ensure form inputs maintain proper sizing on mobile */
			.form-input {
				min-height: 3.2rem;
				height: 3.2rem;
				font-size: 0.95rem;
			}

			#gender {
				min-height: 3.2rem !important;
				height: 3.2rem !important;
				font-size: 0.95rem !important;
			}
		}
	</style>
	<body class="is-preload">
		<!-- Navigation will be loaded dynamically -->
>>>>>>> Stashed changes

		<!-- Wrapper (same as intro page for background consistency) -->
		<div id="wrapper">

		<!-- Main Register Container -->
		<div class="register-container">
			<div class="register-content">
<<<<<<< Updated upstream
				<button class="back-btn" id="back-btn" onclick="goBack()">←</button>
				<div class="page-indicator" id="page-indicator">1/2</div>
				
				<h1 class="register-title" id="register-title">欢迎来到Timing</h1>
=======
				<button class="back-btn" id="back-btn" onclick="goBack()"></button>
				<div class="page-indicator" id="page-indicator">1/2</div>
				
				<h1 class="register-title" id="register-title">欢迎来到Timing</h1>
				<p class="register-subtitle" id="register-subtitle">邮箱将作为唯一身份标识，提交后不可更改</p>
>>>>>>> Stashed changes
				
				<form id="registerForm" action="#" method="post">
					<!-- Page 1: Basic Information -->
					<div class="form-page active" id="page1">
						<div class="form-group">
<<<<<<< Updated upstream
							<label for="username" id="userName-label">用户名</label>
							<input type="text" id="username" name="username" class="form-input" placeholder="">
=======
							<label for="name" id="name-label">姓名</label>
							<input type="text" id="name" name="name" class="form-input" placeholder="" required>
>>>>>>> Stashed changes
						</div>
						
						<div class="form-group">
							<label for="email" id="email-label">邮箱</label>
<<<<<<< Updated upstream
							<input type="email" id="email" name="email" class="form-input" placeholder="">
						</div>
						
						<!-- <div class="form-group">
							<label for="verification" id="verification-label">验证码</label>
							<div class="verification-group">
								<input type="text" id="verification" name="verification" class="form-input" placeholder="">
								<span class="verification-resend" id="verification-resend">重新发送</span>
							</div>
						</div> -->
						
						<div class="form-group">
							<label for="password" id="password-label">密码</label>
							<input type="password" id="password" name="password" class="form-input" placeholder="">
=======
							<input type="email" id="email" name="email" class="form-input" placeholder="" required>
						</div>
						
						<div class="form-group">
							<label for="verification" id="verification-label">验证码</label>
							<div class="verification-group">
								<input type="text" id="verification" name="verification" class="form-input" placeholder="" required>
								<span class="verification-resend" id="verification-resend">发送</span>
							</div>
						</div>
						
						<div class="form-group">
							<label for="password" id="password-label">密码</label>
							<input type="password" id="password" name="password" class="form-input" placeholder="" required>
>>>>>>> Stashed changes
						</div>
						
						<div class="form-group">
							<label for="confirmPassword" id="confirm-password-label">确认密码</label>
<<<<<<< Updated upstream
							<input type="password" id="confirmPassword" name="confirmPassword" class="form-input" placeholder="">
=======
							<input type="password" id="confirmPassword" name="confirmPassword" class="form-input" placeholder="" required>
>>>>>>> Stashed changes
							<div class="password-warning" id="password-warning">不一致</div>
						</div>
						
						<div class="checkbox-forgot-row">
							<div class="checkbox-group">
<<<<<<< Updated upstream
								<input type="checkbox" id="agree" name="agree">
=======
								<input type="checkbox" id="agree" name="agree" required>
>>>>>>> Stashed changes
								<label for="agree" id="agree-label">同意服务条款</label>
							</div>
							
							<div class="forgot-password">
								<a href="#" id="termsLink">查看条款</a>
							</div>
						</div>
						
<<<<<<< Updated upstream
						<!-- <button type="button" class="form-register-btn" id="next-btn" onclick="nextPage()">确认</button> -->
						<button type="submit" class="form-register-btn" id="register-submit">注册</button>
					</div>

					<!-- Page 2: Birth Information
					<div class="form-page" id="page2">
						<div class="form-group">
							<label for="birthtime" id="birthtime-label">出生时间</label>
							<input type="datetime-local" id="birthtime" name="birthtime" class="form-input">
=======
						<button type="button" class="form-register-btn" id="next-btn" onclick="nextPage()">确认</button>
					</div>

					<!-- Page 2: Birth Information -->
					<div class="form-page" id="page2">
						<div class="form-group">
							<label for="birthtime" id="birthtime-label">出生时间</label>
							<input type="datetime-local" id="birthtime" name="birthtime" class="form-input" required>
>>>>>>> Stashed changes
						</div>

						<div class="form-group">
							<label for="gender" id="gender-label">出生性别</label>
<<<<<<< Updated upstream
							<select id="gender" name="gender" class="form-input">
=======
							<select id="gender" name="gender" class="form-input" required>
>>>>>>> Stashed changes
								<option value="">请选择性别</option>
								<option value="female">女</option>
								<option value="male">男</option>
							</select>
						</div>

						<div class="form-group">
							<label for="birthplace" id="birthplace-label">出生地点</label>
<<<<<<< Updated upstream
							<input type="text" id="birthplace" name="birthplace" class="form-input" placeholder="">
=======
							<input type="text" id="birthplace" name="birthplace" class="form-input" placeholder="" required>
>>>>>>> Stashed changes
						</div>

						<div class="checkbox-forgot-row">
							<div class="checkbox-group">
								<input type="checkbox" id="userAgreement" name="userAgreement" checked>
								<label for="userAgreement" id="user-agreement-label">请阅读并同意用户协议和隐私政策</label>
							</div>
						</div>

						<div class="checkbox-forgot-row" style="margin-top: 1rem;">
							<div class="checkbox-group">
								<input type="checkbox" id="betaTester" name="betaTester" checked>
								<label for="betaTester" id="beta-tester-label">申请成为内测用户</label>
							</div>
						</div>

						<button type="submit" class="form-register-btn" id="register-submit">注册</button>
<<<<<<< Updated upstream
					</div> -->
=======
					</div>
>>>>>>> Stashed changes
				</form>
				
				<div class="login-link">
					<p id="login-text">已有账户？</p>
					<a href="#" id="login-link">立即登录</a>
				</div>
			</div>
		</div>

		</div>

		<!-- BG -->
		<div id="bg"></div>

				<!-- Scripts -->
			<script src="assets/js/jquery.min.js"></script>
			<script src="assets/js/auth.js"></script>
		<script>
			// Fallback to CDN if local file fails to load
			if (typeof jQuery === 'undefined') {
				document.write('<script src="https://code.jquery.com/jquery-3.6.0.min.js"><\/script>');
				// Additional fallback to a Chinese CDN
				document.write('<script src="https://cdn.bootcdn.net/ajax/libs/jquery/3.6.0/jquery.min.js"><\/script>');
			}
		</script>
		<script src="assets/js/browser.min.js"></script>
		<script src="assets/js/breakpoints.min.js"></script>
		<script src="assets/js/util.js"></script>
		<script src="assets/js/main.js"></script>
<<<<<<< Updated upstream
		<!-- Navigation handling -->
		<script src="assets/js/navigation.js"></script>
		
		<script>
			// Language detection and content switching
			let currentLanguage = 'zh'; // Default to Chinese
			
			// Detect language from URL parameters or referrer
			function detectLanguage() {
				const urlParams = new URLSearchParams(window.location.search);
				const langParam = urlParams.get('lang');
				
				// Priority 1: URL parameter
				if (langParam === 'en') {
					return 'en';
				} else if (langParam === 'zh') {
					return 'zh';
				}
				
				// Priority 2: Check referrer
				const referrer = document.referrer;
				if (referrer) {
					// Check if coming from English pages
					if (referrer.includes('index.html') && !referrer.includes('index-zh.html')) {
						return 'en';
					}
					// Check if coming from Chinese pages
					if (referrer.includes('index-zh.html')) {
						return 'zh';
					}
					// Check for language parameters in referrer
					if (referrer.includes('lang=en')) {
						return 'en';
					}
					if (referrer.includes('lang=zh')) {
						return 'zh';
					}
				}
				
				return 'zh'; // Default to Chinese
			}
			
			// Language content
			const content = {
				zh: {
					title: 'Timing - 注册',
					registerTitle: '欢迎来到Timing',
					userNameLabel: '用户名',
					userNamePlaceholder: '请输入您的用户名',
					emailLabel: '邮箱',
					emailPlaceholder: '请输入邮箱地址',
					// verificationLabel: '验证码',
					// verificationPlaceholder: '请输入验证码',
					// verificationResend: '重新发送',
=======
		<!-- Load navigation system -->
		<script src="assets/js/navigation-loader.js"></script>
		<script src="assets/js/navigation.js"></script>
		
		<script>
			// Global language variable for form functionality
			let currentLanguage = 'zh'; // Default to Chinese
			
			// Language content
			const content = {
				zh: {
											title: 'Timing - 注册',
					registerTitle: '欢迎来到Timing',
					registerSubtitle1: '邮箱将作为唯一身份标识，提交后不可更改',
					registerSubtitle2: '我们将根据你的出生信息建成模型，\n稍后也可以在设置更改这些信息',
					nameLabel: '姓名',
					namePlaceholder: '请输入您的姓名',
					emailLabel: '邮箱',
					emailPlaceholder: '请输入邮箱地址',
					verificationLabel: '验证码',
					verificationPlaceholder: '请输入验证码',
					verificationSend: '发送',
					verificationResend: '重新发送',
>>>>>>> Stashed changes
					passwordLabel: '密码',
					passwordPlaceholder: '请输入密码',
					confirmPasswordLabel: '确认密码',
					confirmPasswordPlaceholder: '请再次输入密码',
					passwordWarning: '不一致',
					agreeLabel: '同意服务条款',
					termsLink: '查看条款',
					nextBtn: '确认',
					birthtimeLabel: '出生时间',
<<<<<<< Updated upstream
					// genderLabel: '出生性别',
					// genderOptions: {
					// 	placeholder: '请选择性别',
					// 	female: '女',
					// 	male: '男'
					// },
					// birthplaceLabel: '出生地点',
					// birthplacePlaceholder: '请输入出生地点',
=======
					genderLabel: '出生性别',
					genderOptions: {
						placeholder: '请选择性别',
						female: '女',
						male: '男'
					},
					birthplaceLabel: '出生地点',
					birthplacePlaceholder: '请输入出生地点',
>>>>>>> Stashed changes
					userAgreementLabel: '请阅读并同意用户协议和隐私政策',
					betaTesterLabel: '申请成为内测用户',
					registerSubmit: '注册',
					loginText: '已有账户？',
<<<<<<< Updated upstream
					loginLink: '立即登录',
					navIntro: '简介',
					navWork: '功能',
					navCurve: '能量曲线',
					navContact: '联系我们',
					navLogin: '登录',
					navSignup: '注册',
					navLang: 'ENG'
=======
					loginLink: '立即登录'
>>>>>>> Stashed changes
				},
				en: {
					title: 'Timing - Register',
					registerTitle: 'Welcome to Timing',
<<<<<<< Updated upstream
					userNameLabel: 'Username',
					userNamePlaceholder: 'Please enter your username',
					emailLabel: 'Email',
					emailPlaceholder: 'Enter your email address',
					// verificationLabel: 'Verification Code',
					// verificationPlaceholder: 'Enter verification code',
					// verificationResend: 'Resend',
=======
					registerSubtitle1: 'Email will be used as the unique identifier and cannot be changed after submission',
					registerSubtitle2: 'We will build a model based on your birth information,\nwhich can also be changed later in settings',
					nameLabel: 'Name',
					namePlaceholder: 'Please enter your name',
					emailLabel: 'Email',
					emailPlaceholder: 'Enter your email address',
					verificationLabel: 'Verification Code',
					verificationPlaceholder: 'Enter verification code',
					verificationSend: 'Send',
					verificationResend: 'Resend',
>>>>>>> Stashed changes
					passwordLabel: 'Password',
					passwordPlaceholder: 'Enter your password',
					confirmPasswordLabel: 'Confirm Password',
					confirmPasswordPlaceholder: 'Enter your password again',
					passwordWarning: 'Mismatch',
					agreeLabel: 'Agree to Terms of Service',
					termsLink: 'View Terms',
					nextBtn: 'Confirm',
<<<<<<< Updated upstream
					// birthtimeLabel: 'Birth Date & Time',
					// genderLabel: 'Birth Gender',
					// genderOptions: {
					// 	placeholder: 'Please select gender',
					// 	female: 'Female',
					// 	male: 'Male'
					// },
					// birthplaceLabel: 'Birth Place',
					// birthplacePlaceholder: 'Please enter birth place',
=======
					birthtimeLabel: 'Birth Date & Time',
					genderLabel: 'Birth Gender',
					genderOptions: {
						placeholder: 'Please select gender',
						female: 'Female',
						male: 'Male'
					},
					birthplaceLabel: 'Birth Place',
					birthplacePlaceholder: 'Please enter birth place',
>>>>>>> Stashed changes
					userAgreementLabel: 'Please read and agree to the User Agreement and Privacy Policy',
					betaTesterLabel: 'Apply to become a beta tester',
					registerSubmit: 'Register',
					loginText: 'Already have an account?',
<<<<<<< Updated upstream
					loginLink: 'Sign In Now',
					navIntro: 'Introduction',
					navWork: 'Function',
					navCurve: 'Energy Curve',
					navContact: 'Contact',
					                navLogin: 'SIGN IN',
					navSignup: 'SIGN UP',
					navLang: '中文'
=======
					loginLink: 'Sign In Now'
>>>>>>> Stashed changes
				}
			};
			
			// Update page content based on language
			function updateContent(lang) {
				currentLanguage = lang;
				const c = content[lang];
				
				// Update page title
				document.title = c.title;
				
				// Update form content
				document.getElementById('register-title').textContent = c.registerTitle;
<<<<<<< Updated upstream
				document.getElementById('userName-label').textContent = c.userNameLabel;
				document.getElementById('username').placeholder = c.userNamePlaceholder;
				document.getElementById('email-label').textContent = c.emailLabel;
				document.getElementById('email').placeholder = c.emailPlaceholder;
				// document.getElementById('verification-label').textContent = c.verificationLabel;
				// document.getElementById('verification').placeholder = c.verificationPlaceholder;
				// document.getElementById('verification-resend').textContent = c.verificationResend;
=======
				updateSubtitle();
				document.getElementById('name-label').textContent = c.nameLabel;
				document.getElementById('name').placeholder = c.namePlaceholder;
				document.getElementById('email-label').textContent = c.emailLabel;
				document.getElementById('email').placeholder = c.emailPlaceholder;
				document.getElementById('verification-label').textContent = c.verificationLabel;
				document.getElementById('verification').placeholder = c.verificationPlaceholder;
				// Set initial send button text
				const sendBtn = document.getElementById('verification-resend');
				if (sendBtn && !sendBtn.dataset.codeSent) {
					sendBtn.textContent = c.verificationSend;
				} else {
					sendBtn.textContent = c.verificationResend;
				}
>>>>>>> Stashed changes
				document.getElementById('password-label').textContent = c.passwordLabel;
				document.getElementById('password').placeholder = c.passwordPlaceholder;
				document.getElementById('confirm-password-label').textContent = c.confirmPasswordLabel;
				document.getElementById('confirmPassword').placeholder = c.confirmPasswordPlaceholder;
				document.getElementById('password-warning').textContent = c.passwordWarning;
				document.getElementById('agree-label').textContent = c.agreeLabel;
				document.getElementById('termsLink').textContent = c.termsLink;
<<<<<<< Updated upstream
				// document.getElementById('next-btn').textContent = c.nextBtn;
				// document.getElementById('birthtime-label').textContent = c.birthtimeLabel;
				// document.getElementById('gender-label').textContent = c.genderLabel;
				// document.getElementById('birthplace-label').textContent = c.birthplaceLabel;
				// document.getElementById('birthplace').placeholder = c.birthplacePlaceholder;
				// document.getElementById('user-agreement-label').textContent = c.userAgreementLabel;
				// document.getElementById('beta-tester-label').textContent = c.betaTesterLabel;
=======
				document.getElementById('next-btn').textContent = c.nextBtn;
				document.getElementById('birthtime-label').textContent = c.birthtimeLabel;
				document.getElementById('gender-label').textContent = c.genderLabel;
				document.getElementById('birthplace-label').textContent = c.birthplaceLabel;
				document.getElementById('birthplace').placeholder = c.birthplacePlaceholder;
				document.getElementById('user-agreement-label').textContent = c.userAgreementLabel;
				document.getElementById('beta-tester-label').textContent = c.betaTesterLabel;
>>>>>>> Stashed changes
				document.getElementById('register-submit').textContent = c.registerSubmit;
				document.getElementById('login-text').textContent = c.loginText;
				document.getElementById('login-link').textContent = c.loginLink;
				
				// Update gender select options
<<<<<<< Updated upstream
				// const genderSelect = document.getElementById('gender');
				// genderSelect.innerHTML = `
				// 	<option value="">${c.genderOptions.placeholder}</option>
				// 	<option value="female">${c.genderOptions.female}</option>
				// 	<option value="male">${c.genderOptions.male}</option>
				// `;
				
				// Update navigation
				document.getElementById('nav-intro').textContent = c.navIntro;
				document.getElementById('nav-work').textContent = c.navWork;
				document.getElementById('nav-curve').textContent = c.navCurve;
				document.getElementById('nav-contact').textContent = c.navContact;
				document.getElementById('nav-login').textContent = c.navLogin;
				document.getElementById('nav-signup').textContent = c.navSignup;
				document.getElementById('nav-lang').textContent = c.navLang;
				
				// Update navigation links based on language
				if (lang === 'zh') {
					document.getElementById('nav-intro').href = 'index-zh.html#intro';
					document.getElementById('nav-work').href = 'index-zh.html#work';
					document.getElementById('nav-curve').href = 'curve/index_curve.html?lang=zh';
					document.getElementById('nav-contact').href = 'index-zh.html#contact';
					document.getElementById('nav-login').href = 'login.html?lang=zh';
					document.getElementById('nav-signup').href = 'register.html?lang=zh';
					document.getElementById('nav-lang').href = 'register.html?lang=en';
				} else {
					document.getElementById('nav-intro').href = 'index.html#intro';
					document.getElementById('nav-work').href = 'index.html#work';
					document.getElementById('nav-curve').href = 'curve/index_curve.html?lang=en';
					document.getElementById('nav-contact').href = 'index.html#contact';
					document.getElementById('nav-login').href = 'login.html?lang=en';
					document.getElementById('nav-signup').href = 'register.html?lang=en';
					document.getElementById('nav-lang').href = 'register.html?lang=zh';
				}
				
				// Update nav-auth class for English page
				const navAuth = document.querySelector('.nav-auth');
				if (lang === 'en') {
					navAuth.classList.add('english-page');
				} else {
					navAuth.classList.remove('english-page');
				}
			}
			
			// Language switching
			document.getElementById('nav-lang').addEventListener('click', function(e) {
				e.preventDefault();
				const newLang = currentLanguage === 'zh' ? 'en' : 'zh';
				updateContent(newLang);
			});
			
			// Logo click handler
			function goToHomePage() {
				if (currentLanguage === 'zh') {
					window.location.href = 'index-zh.html';
				} else {
					window.location.href = 'index.html';
				}
			}
			
=======
				const genderSelect = document.getElementById('gender');
				genderSelect.innerHTML = `
					<option value="">${c.genderOptions.placeholder}</option>
					<option value="female">${c.genderOptions.female}</option>
					<option value="male">${c.genderOptions.male}</option>
				`;
			}
			
			// Initialize language on navigation load
			document.addEventListener('navigationLoaded', function(e) {
				currentLanguage = e.detail.language;
				updateContent(currentLanguage);
			});
			
>>>>>>> Stashed changes
			// Password validation function
			function validatePassword() {
				const password = document.getElementById('password').value;
				const confirmPassword = document.getElementById('confirmPassword').value;
				const warning = document.getElementById('password-warning');
				
				if (confirmPassword && password !== confirmPassword) {
					warning.classList.add('show');
				} else {
					warning.classList.remove('show');
				}
			}
			
			// Page navigation variables
			let currentPage = 1;
			
<<<<<<< Updated upstream
			// Page navigation functions
			// function nextPage() {
			// 	// Validate page 1 fields
			// 	const username = document.getElementById('username').value;
			// 	const email = document.getElementById('email').value;
			// 	const verification = document.getElementById('verification').value;
			// 	const password = document.getElementById('password').value;
			// 	const confirmPassword = document.getElementById('confirmPassword').value;
			// 	const agree = document.getElementById('agree').checked;
				
			// 	if (!username || !email || !password || !confirmPassword) {
			// 		const message = currentLanguage === 'zh' ? '请填写所有必填字段' : 'Please fill in all required fields';
			// 		alert(message);
			// 		return;
			// 	}
				
			// 	if (password !== confirmPassword) {
			// 		const message = currentLanguage === 'zh' ? '密码不一致' : 'Passwords do not match';
			// 		alert(message);
			// 		return;
			// 	}
				
			// 	if (!agree) {
			// 		const message = currentLanguage === 'zh' ? '请同意服务条款' : 'Please agree to the terms of service';
			// 		alert(message);
			// 		return;
			// 	}
				
			// 	// Switch to page 2
			// 	document.getElementById('page1').classList.remove('active');
			// 	document.getElementById('page2').classList.add('active');
			// 	document.getElementById('page-indicator').textContent = '2/2';
			// 	document.getElementById('back-btn').style.display = 'block';
			// 	currentPage = 2;
			// }
			
			function goBack() {
				// Switch to page 1
				document.getElementById('page2').classList.remove('active');
				document.getElementById('page1').classList.add('active');
				document.getElementById('page-indicator').textContent = '1/2';
				document.getElementById('back-btn').style.display = 'none';
				currentPage = 1;
			}
			
			// Initialize language on page load
			document.addEventListener('DOMContentLoaded', function() {
				const detectedLang = detectLanguage();
				updateContent(detectedLang);
				
				// Add password validation listeners
				document.getElementById('password').addEventListener('input', validatePassword);
				document.getElementById('confirmPassword').addEventListener('input', validatePassword);
			});
			

			
			// Register form handling
			document.getElementById('registerForm').addEventListener('submit', function(e) {
				e.preventDefault();

				const username = document.getElementById('username').value;
				const email = document.getElementById('email').value;
				// const verification = document.getElementById('verification').value;
=======
			// Update subtitle based on current page
			function updateSubtitle() {
				const c = content[currentLanguage];
				const subtitle = currentPage === 1 ? c.registerSubtitle1 : c.registerSubtitle2;
				document.getElementById('register-subtitle').innerHTML = subtitle.replace(/\n/g, '<br>');
			}
			
			// Page navigation functions
			function nextPage() {
				// Validate page 1 fields
				const name = document.getElementById('name').value;
				const email = document.getElementById('email').value;
				const verification = document.getElementById('verification').value;
>>>>>>> Stashed changes
				const password = document.getElementById('password').value;
				const confirmPassword = document.getElementById('confirmPassword').value;
				const agree = document.getElementById('agree').checked;
				
<<<<<<< Updated upstream
				if (!username || !email || !password) {
=======
				if (!name || !email || !verification || !password || !confirmPassword) {
>>>>>>> Stashed changes
					const message = currentLanguage === 'zh' ? '请填写所有必填字段' : 'Please fill in all required fields';
					alert(message);
					return;
				}
				
				if (password !== confirmPassword) {
					const message = currentLanguage === 'zh' ? '密码不一致' : 'Passwords do not match';
					alert(message);
					return;
				}
				
				if (!agree) {
					const message = currentLanguage === 'zh' ? '请同意服务条款' : 'Please agree to the terms of service';
					alert(message);
					return;
				}
				
<<<<<<< Updated upstream
				// // Validate page 2 fields
				// const birthtime = document.getElementById('birthtime').value;
				// const gender = document.getElementById('gender').value;
				// const birthplace = document.getElementById('birthplace').value;
				
				// if (!birthtime || !gender || !birthplace) {
				// 	const message = currentLanguage === 'zh' ? '请填写所有必填字段' : 'Please fill in all required fields';
				// 	alert(message);
				// 	return;
				// }
				
				// Get all form data
				// const formData = {
				// 	username: document.getElementById('username').value,
				// 	email: document.getElementById('email').value,
				// 	verification: document.getElementById('verification').value,
				// 	password: document.getElementById('password').value,
				// 	birthtime: birthtime,
				// 	gender: gender,
				// 	birthplace: birthplace,
				// 	userAgreement: document.getElementById('userAgreement').checked,
				// 	betaTester: document.getElementById('betaTester').checked,
				// 	language: currentLanguage
				// };
				
				// // TODO: 这里将来会连接到后端API
				// console.log('注册信息:', formData);
				
=======
				// Switch to page 2
				document.getElementById('page1').classList.remove('active');
				document.getElementById('page2').classList.add('active');
				document.getElementById('page-indicator').textContent = '2/2';
				const backBtn = document.getElementById('back-btn');
				backBtn.style.display = 'flex';
				backBtn.classList.add('active');
				currentPage = 2;
				updateSubtitle();
			}
			
			function goBack() {
				// Switch to page 1
				document.getElementById('page2').classList.remove('active');
				document.getElementById('page1').classList.add('active');
				document.getElementById('page-indicator').textContent = '1/2';
				const backBtn = document.getElementById('back-btn');
				backBtn.style.display = 'none';
				backBtn.classList.remove('active');
				currentPage = 1;
				updateSubtitle();
			}
			
			// Initialize form interactions on page load
			document.addEventListener('DOMContentLoaded', function() {
				// Add password validation listeners
				document.getElementById('password').addEventListener('input', validatePassword);
				document.getElementById('confirmPassword').addEventListener('input', validatePassword);
			});
			

			
			// Register form handling
			document.getElementById('registerForm').addEventListener('submit', function(e) {
				e.preventDefault();
				
				// Validate page 2 fields
				const birthtime = document.getElementById('birthtime').value;
				const gender = document.getElementById('gender').value;
				const birthplace = document.getElementById('birthplace').value;
				
				if (!birthtime || !gender || !birthplace) {
					const message = currentLanguage === 'zh' ? '请填写所有必填字段' : 'Please fill in all required fields';
					alert(message);
					return;
				}
				
				// Get all form data
				const formData = {
					name: document.getElementById('name').value,
					email: document.getElementById('email').value,
					verification: document.getElementById('verification').value,
					password: document.getElementById('password').value,
					birthtime: birthtime,
					gender: gender,
					birthplace: birthplace,
					userAgreement: document.getElementById('userAgreement').checked,
					betaTester: document.getElementById('betaTester').checked,
					language: currentLanguage
				};
				
				// Use the AuthSystem to handle registration
				if (window.authSystem) {
					// Create a synthetic event for the auth system
					const syntheticEvent = {
						preventDefault: () => {}
					};
					window.authSystem.handleRegister(syntheticEvent);
				} else {
					console.log('注册信息:', formData);
					// 临时提示
					const message = currentLanguage === 'zh' ? '注册功能将在后端完成后启用' : 'Registration functionality will be enabled after backend completion';
					alert(message);
				}
>>>>>>> Stashed changes
			});
			
			// Terms link handling
			document.getElementById('termsLink').addEventListener('click', function(e) {
				e.preventDefault();
				const message = currentLanguage === 'zh' ? '服务条款功能将在后端完成后启用' : 'Terms of service functionality will be enabled after backend completion';
				alert(message);
			});
			
			// Login link handling
			document.getElementById('login-link').addEventListener('click', function(e) {
				e.preventDefault();
				// Navigate to login page with current language
				window.location.href = `login.html?lang=${currentLanguage}`;
			});
			
			// Verification resend handling
<<<<<<< Updated upstream
			// document.getElementById('verification-resend').addEventListener('click', function() {
			// 	const message = currentLanguage === 'zh' ? '验证码已发送' : 'Verification code sent';
			// 	alert(message);
			// });
=======
			document.getElementById('verification-resend').addEventListener('click', function() {
				// Use the AuthSystem to send verification code
				if (window.authSystem) {
					window.authSystem.sendVerificationCode();
				} else {
					const message = currentLanguage === 'zh' ? '验证码发送功能暂不可用' : 'Verification code functionality not available';
					alert(message);
				}
			});
>>>>>>> Stashed changes
		</script>
	</body>
</html> 