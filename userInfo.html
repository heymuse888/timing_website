<!DOCTYPE HTML>
<html>
	<head>
		<title>注册 - Timing</title>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
		<link rel="icon" type="image/x-icon" href="assets/favicon.ico">
		<link rel="icon" type="image/png" sizes="32x32" href="assets/favicon.png">
		<link rel="apple-touch-icon" sizes="180x180" href="assets/apple-touch-icon.png">
		<link rel="stylesheet" href="assets/css/main.css">
		<link rel="stylesheet" href="assets/css/navigation.css">
		<link rel="stylesheet" href="assets/css/noscript.css" media="none">
		<link rel="stylesheet" href="assets/css/register-style.css">
		<noscript><link rel="stylesheet" href="assets/css/noscript.css" /></noscript>
	</head>

	<body class="is-preload">
		<!-- Top Navigation Bar (exactly same as intro page) -->
		<!-- <nav class="top-navigation">
			<div class="nav-container">
				<div class="nav-logo" onclick="goToHomePage()" style="cursor: pointer;">
					<img src="images/LOGO.png" alt="Timing Logo" />
					<span class="logo-text">Timing</span>
				</div>
				<div class="nav-menu">
					<a href="#" class="nav-item" id="nav-intro">简介</a>
					<a href="#" class="nav-item" id="nav-work">功能</a>
					<a href="#" class="nav-item" id="nav-curve">能量曲线</a>
					<a href="#" class="nav-item" id="nav-contact">联系我们</a>
				</div>
				<div class="nav-auth">
					<a href="#" class="login-btn" id="nav-login">登录</a>
					<a href="#" class="signup-btn" id="nav-signup">注册</a>
					<a href="#" class="lang-btn" id="nav-lang">ENG</a>
				</div>
			</div>
		</nav> -->

		<!-- Wrapper (same as intro page for background consistency) -->
		<div id="wrapper">

		<!-- Main Register Container -->
		<div class="register-container">
			<div class="register-content">
				<h1 class="register-title" id="register-title">欢迎来到Timing</h1>
				
				<form id="userInfoForm" action="#" method="post">

					<div class="form-page active" id="page1">
                        <div class="form-group">
							<label for="birthtime" id="birthtime-label">出生时间</label>
							<input type="text" id="birthdate" placeholder="YYYY-MM-DD" maxlength="10">

							<script>
								document.getElementById('birthdate').addEventListener('input', function(e) {
									let value = e.target.value.replace(/\D/g, '');
									if (value.length > 4) {
										value = value.substring(0, 4) + '-' + value.substring(4);
									}
									if (value.length > 7) {
										value = value.substring(0, 7) + '-' + value.substring(7);
									}
									e.target.value = value.substring(0, 10);
								});
							</script>

							<input type="text" id="birthtime" placeholder="HH:MM" maxlength="5">

							<script>
								document.getElementById('birthtime').addEventListener('input', function(e) {
									let value = e.target.value.replace(/\D/g, '');
									if (value.length > 2) {
										value = value.substring(0, 2) + ':' + value.substring(2);
									}
									e.target.value = value.substring(0, 5);
								});
							</script>
						</div>

						<div class="form-group">
							<label for="gender" id="gender-label">性别</label>
							<select id="gender" name="gender" class="form-input">
								<option value="">请选择性别</option>
								<option value="female">女</option>
								<option value="male">男</option>
								<option value="other">其他</option>
							</select>
						</div>

						<div class="form-group">
							<label for="birthplace" id="birthplace-label">出生地点</label>
							<input type="text" id="birthplace" name="birthplace" class="form-input" placeholder="请输入出生地点">
						</div>
						
						<!-- <button type="button" class="form-register-btn" id="next-btn" onclick="nextPage()">确认</button> -->
						<button type="submit" class="form-register-btn" id="register-submit">更新信息</button>
					</div>
				</form>

			</div>
		</div>

		</div>

		<!-- BG -->
		<div id="bg"></div>

		<!-- Scripts -->
		<script src="assets/js/jquery.min.js"></script>
		<script src="assets/js/auth.js"></script>
		<script>
			// Fallback to CDN if local file fails to load
			if (typeof jQuery === 'undefined') {
				document.write('<script src="https://code.jquery.com/jquery-3.6.0.min.js"><\/script>');
				// Additional fallback to a Chinese CDN
				document.write('<script src="https://cdn.bootcdn.net/ajax/libs/jquery/3.6.0/jquery.min.js"><\/script>');
			}
		</script>
		<script src="assets/js/browser.min.js"></script>
		<script src="assets/js/breakpoints.min.js"></script>
		<script src="assets/js/util.js"></script>
		<script src="assets/js/main.js"></script>
		<!-- Navigation handling -->
		<script src="assets/js/navigation.js"></script>
		<script src="assets/js/navigation-loader.js"></script>

		<script>
			// Language detection and content switching
			let currentLanguage = 'zh'; // Default to Chinese
			
			// Detect language from URL parameters or referrer
			function detectLanguage() {
				const urlParams = new URLSearchParams(window.location.search);
				const langParam = urlParams.get('lang');
				
				// Priority 1: URL parameter
				if (langParam === 'en') {
					return 'en';
				} else if (langParam === 'zh') {
					return 'zh';
				}
				
				// Priority 2: Check referrer
				const referrer = document.referrer;
				if (referrer) {
					// Check if coming from English pages
					if (referrer.includes('index.html') && !referrer.includes('index-zh.html')) {
						return 'en';
					}
					// Check if coming from Chinese pages
					if (referrer.includes('index-zh.html')) {
						return 'zh';
					}
					// Check for language parameters in referrer
					if (referrer.includes('lang=en')) {
						return 'en';
					}
					if (referrer.includes('lang=zh')) {
						return 'zh';
					}
				}
				
				return 'zh'; // Default to Chinese
			}
			
			// Language content
			const content = {
				zh: {
					title: 'Timing - 注册',
					registerTitle: '欢迎来到Timing',
					
					birthtimeLabel: '出生时间',
					genderLabel: '性别',
					genderOptions: {
						placeholder: '请选择性别',
						female: '女',
						male: '男',
						other: '其他',
					},
					birthplaceLabel: '出生地点',
					birthplacePlaceholder: '请输入出生地点',

					registerSubmit: '更新信息',
				},
				en: {
					title: 'Timing - Register',
					registerTitle: 'Welcome to Timing',

					birthtimeLabel: 'Birth Date & Time',
					genderLabel: 'Gender',
					genderOptions: {
						placeholder: 'Please select gender',
						female: 'Female',
						male: 'Male',
						other: 'Other',
					},
					birthplaceLabel: 'Birth Place',
					birthplacePlaceholder: 'Please enter birth place',
					registerSubmit: 'Update Information',
				}
			};
			
			// Update page content based on language
			function updateContent(lang) {
				currentLanguage = lang;
				const c = content[lang];
				
				// Update page title
				document.title = c.title;
				
				// Update form content
				document.getElementById('register-title').textContent = c.registerTitle;
				
				document.getElementById('birthtime-label').textContent = c.birthtimeLabel;

				document.getElementById('gender-label').textContent = c.genderLabel;

				document.getElementById('birthplace-label').textContent = c.birthplaceLabel;
				document.getElementById('birthplace').placeholder = c.birthplacePlaceholder;

				document.getElementById('register-submit').textContent = c.registerSubmit;
				
				// Update gender select options
				const genderSelect = document.getElementById('gender');
				genderSelect.innerHTML = `
					<option value="">${c.genderOptions.placeholder}</option>
					<option value="female">${c.genderOptions.female}</option>
					<option value="male">${c.genderOptions.male}</option>
					<option value="male">${c.genderOptions.other}</option>
				`;

			}
			
			// Logo click handler
			function goToHomePage() {
				if (currentLanguage === 'zh') {
					window.location.href = 'index-zh.html';
				} else {
					window.location.href = 'index.html';
				}
			}
			
			// Password validation function
			function validatePassword() {
				const password = document.getElementById('password').value;
				const confirmPassword = document.getElementById('confirmPassword').value;
				const warning = document.getElementById('password-warning');
				
				if (confirmPassword && password !== confirmPassword) {
					warning.classList.add('show');
				} else {
					warning.classList.remove('show');
				}
			}
			
			// Initialize language on page load
			document.addEventListener('DOMContentLoaded', function() {
				const detectedLang = detectLanguage();
				updateContent(detectedLang);
				
			});
			
		</script>
	</body>
</html> 